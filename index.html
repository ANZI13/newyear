<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>New Year Countdown & Fireworks</title>
	<style>
		html,body{height:100%;margin:0;background:#000;overflow:hidden;font-family:system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}
		canvas{position:fixed;inset:0;display:block;z-index:1}
		.overlay{position:fixed;inset:0;z-index:2;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;text-align:center;padding:2rem}
		h1{font-size:clamp(1.5rem,5vw,3.5rem);margin:0 0 .5rem;color:#ffea00;text-shadow:0 2px 8px rgba(0,0,0,.8)}
		#count{font-size:clamp(1rem,4vw,2.2rem);background:rgba(0,0,0,0.25);padding:.6rem 1rem;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.6)}
		.sub{margin-top:1rem;color:#ffd;opacity:.9}
		.hidden{display:none}
	</style>
</head>
<body>
	<canvas id="fireworks"></canvas>
	<div class="overlay">
		<h1 id="title">Countdown to the New Year</h1>
		<div id="count">-- : -- : -- : --</div>
		<div class="sub">Days &nbsp;&nbsp; Hours &nbsp;&nbsp; Minutes &nbsp;&nbsp; Seconds</div>
	</div>

	<script>
		// Countdown target: next Jan 1st at 00:00:00
		function getNextNewYear(){
			const now = new Date();
			return new Date(now.getFullYear()+1,0,1,0,0,0);
		}

		const target = getNextNewYear();
		const countEl = document.getElementById('count');
		const titleEl = document.getElementById('title');

		function pad(n){return n.toString().padStart(2,'0')}
		function updateCountdown(){
			const now = new Date();
			let diff = Math.max(0, target - now);
			if(diff <= 0){
				countEl.textContent = '00 : 00 : 00 : 00';
				titleEl.textContent = 'Happy New Year!';
				bigBurst();
				return;
			}
			const s = Math.floor(diff/1000)%60;
			const m = Math.floor(diff/60000)%60;
			const h = Math.floor(diff/3600000)%24;
			const d = Math.floor(diff/86400000);
			countEl.textContent = pad(d)+' : '+pad(h)+' : '+pad(m)+' : '+pad(s);
		}
		setInterval(updateCountdown, 250);
		updateCountdown();

		// Fireworks canvas
		const canvas = document.getElementById('fireworks');
		const ctx = canvas.getContext('2d');
		let W = canvas.width = innerWidth;
		let H = canvas.height = innerHeight;

		window.addEventListener('resize',()=>{W=canvas.width=innerWidth;H=canvas.height=innerHeight});

		const particles = [];

		function rand(min,max){return Math.random()*(max-min)+min}
		function hsl(h,s,l){return 'hsl('+h+','+s+'%,'+l+'%)'}

		class Particle{
			constructor(x,y, vx, vy, color, life){
				this.x = x; this.y = y; this.vx = vx; this.vy = vy; this.color = color; this.life = life; this.age = 0; this.size = rand(1.5,3.8);
			}
			update(dt){
				this.vy += 0.035*dt; // gravity
				this.x += this.vx*dt; this.y += this.vy*dt; this.age += dt;
			}
			get alive(){return this.age < this.life}
			draw(ctx){
				const t = 1 - this.age/this.life;
				ctx.globalAlpha = Math.max(0, t);
				ctx.fillStyle = this.color;
				ctx.beginPath();
				ctx.arc(this.x, this.y, this.size * t, 0, Math.PI*2);
				ctx.fill();
			}
		}

		function burst(x,y,count,colorBase,spread,force,life){
			for(let i=0;i<count;i++){
				const angle = Math.random()*Math.PI*2;
				const speed = rand(force*0.2, force);
				const vx = Math.cos(angle)*speed;
				const vy = Math.sin(angle)*speed;
				const hue = (colorBase + rand(-20,20) + 360) % 360;
				const color = hsl(hue, 100, rand(45,65));
				particles.push(new Particle(x,y,vx,vy,color,life*rand(0.7,1.2)));
			}
		}

		function launch(){
			// launch rocket from bottom with arc and explode
			const sx = rand(W*0.15, W*0.85);
			const tx = rand(W*0.15, W*0.85);
			const peak = rand(H*0.15, H*0.5);
			// simple rocket: animate upward movement then burst
			const rocket = {x:sx,y:H+10, vx:(tx-sx)/120, vy: -rand(5.5,8.5), color:rand(0,360), life:0, explodeAt:rand(H*0.2,H*0.6)};
			let steps = 0;
			const rInterval = setInterval(()=>{
				steps++;
				rocket.x += rocket.vx;
				rocket.y += rocket.vy* (1 - steps/400);
				rocket.vy += 0.02;
				// add trail
				particles.push(new Particle(rocket.x, rocket.y, rand(-0.3,0.3), rand(-0.3,0.3), hsl(rocket.color,100,60), rand(12,18)));
				if(rocket.y < rocket.explodeAt || steps>400){
					clearInterval(rInterval);
					burst(rocket.x, rocket.y, Math.floor(rand(20,80)), rocket.color, 120, rand(1.5,6), rand(0.8,2.2));
				}
			}, 16);
		}

		// Big burst for midnight
		function bigBurst(){
			for(let i=0;i<10;i++){
				setTimeout(()=>{
					burst(rand(W*0.2,W*0.8), rand(H*0.15,H*0.45), 150, rand(0,360), 180, rand(2.5,7.5), rand(1.2,2.8));
				}, i*250);
			}
		}

		// periodic automatic launches
		setInterval(()=>{ if(Math.random()<0.7) launch(); if(Math.random()<0.25) burst(rand(W*0.1,W*0.9), rand(H*0.05,H*0.6), Math.floor(rand(20,80)), rand(0,360), 90, rand(1.2,4.5), rand(0.8,2.2)); }, 900);

		// animation loop
		let last = performance.now();
		function loop(t){
			const dt = Math.min(1/30, (t-last)/16); last = t;
			ctx.clearRect(0,0,W,H);
			// subtle background glow
			ctx.fillStyle = 'rgba(0,0,0,0.25)'; ctx.fillRect(0,0,W,H);

			// update & draw particles
			for(let i=particles.length-1;i>=0;i--){
				const p = particles[i];
				p.update(dt);
				if(!p.alive){ particles.splice(i,1); continue }
				p.draw(ctx);
			}
			ctx.globalAlpha = 1;
			requestAnimationFrame(loop);
		}
		requestAnimationFrame(loop);
	</script>
</body>
</html>
